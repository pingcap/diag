{
  "log-level": "info",
  "log-file": "/tidb-deploy/tikv/log/tikv.log",
  "log-format": "text",
  "slow-log-file": "",
  "slow-log-threshold": "1s",
  "log-rotation-timespan": "1d",
  "log-rotation-size": "300MiB",
  "enable-io-snoop": true,
  "readpool": {
    "unified": {
      "min-thread-count": 1,
      "max-thread-count": 4,
      "stack-size": "10MiB",
      "max-tasks-per-worker": 2000
    },
    "storage": {
      "use-unified-pool": true,
      "high-concurrency": 4,
      "normal-concurrency": 4,
      "low-concurrency": 4,
      "max-tasks-per-worker-high": 2000,
      "max-tasks-per-worker-normal": 2000,
      "max-tasks-per-worker-low": 2000,
      "stack-size": "10MiB"
    },
    "coprocessor": {
      "use-unified-pool": true,
      "high-concurrency": 2,
      "normal-concurrency": 2,
      "low-concurrency": 2,
      "max-tasks-per-worker-high": 2000,
      "max-tasks-per-worker-normal": 2000,
      "max-tasks-per-worker-low": 2000,
      "stack-size": "10MiB"
    }
  },
  "server": {
    "addr": "0.0.0.0:20160",
    "advertise-addr": "172.17.16.15:20160",
    "status-addr": "0.0.0.0:20180",
    "advertise-status-addr": "172.17.16.15:20180",
    "status-thread-pool-size": 1,
    "max-grpc-send-msg-len": 10485760,
    "grpc-compression-type": "none",
    "grpc-concurrency": 5,
    "grpc-concurrent-stream": 1024,
    "grpc-raft-conn-num": 1,
    "grpc-memory-pool-quota": 9223372036854776000,
    "grpc-stream-initial-window-size": "2MiB",
    "grpc-keepalive-time": "10s",
    "grpc-keepalive-timeout": "3s",
    "concurrent-send-snap-limit": 32,
    "concurrent-recv-snap-limit": 32,
    "end-point-recursion-limit": 1000,
    "end-point-stream-channel-size": 8,
    "end-point-batch-row-limit": 64,
    "end-point-stream-batch-row-limit": 128,
    "end-point-enable-batch-if-possible": true,
    "end-point-request-max-handle-duration": "1m",
    "end-point-max-concurrency": 4,
    "snap-max-write-bytes-per-sec": "100MiB",
    "snap-max-total-size": "0KiB",
    "stats-concurrency": 1,
    "heavy-load-threshold": 300,
    "heavy-load-wait-duration": "1ms",
    "enable-request-batch": true,
    "background-thread-count": 2,
    "end-point-slow-log-threshold": "1s",
    "forward-max-connections-per-address": 4,
    "labels": {}
  },
  "storage": {
    "data-dir": "/tidb-data/tikv",
    "gc-ratio-threshold": 1.1,
    "max-key-size": 4096,
    "scheduler-concurrency": 524288,
    "scheduler-worker-pool-size": 4,
    "scheduler-pending-write-threshold": "100MiB",
    "reserve-space": "5GiB",
    "enable-async-apply-prewrite": false,
    "enable-ttl": false,
    "ttl-check-poll-interval": "12h",
    "block-cache": {
      "shared": true,
      "capacity": "2059MiB",
      "num-shard-bits": 6,
      "strict-capacity-limit": false,
      "high-pri-pool-ratio": 0.8,
      "memory-allocator": "nodump"
    }
  },
  "pd": {
    "endpoints": [
      "172.17.16.11:2379"
    ],
    "retry-interval": "300ms",
    "retry-max-count": 9223372036854775807,
    "retry-log-every": 10,
    "update-interval": "10m",
    "enable-forwarding": false
  },
  "raftstore": {
    "prevote": true,
    "raftdb-path": "/tidb-data/tikv/raft",
    "capacity": "0KiB",
    "raft-entry-max-size": "8MiB",
    "raft-log-gc-tick-interval": "10s",
    "raft-log-gc-threshold": 50,
    "raft-log-gc-count-limit": 73728,
    "raft-log-gc-size-limit": "72MiB",
    "raft-engine-purge-interval": "10s",
    "raft-entry-cache-life-time": "30s",
    "raft-reject-transfer-leader-duration": "3s",
    "split-region-check-tick-interval": "10s",
    "region-split-check-diff": "6MiB",
    "region-compact-check-interval": "5m",
    "region-compact-check-step": 100,
    "region-compact-min-tombstones": 10000,
    "region-compact-tombstones-percent": 30,
    "pd-heartbeat-tick-interval": "1m",
    "pd-store-heartbeat-tick-interval": "10s",
    "snap-mgr-gc-tick-interval": "1m",
    "snap-gc-timeout": "4h",
    "lock-cf-compact-interval": "10m",
    "lock-cf-compact-bytes-threshold": "256MiB",
    "notify-capacity": 40960,
    "messages-per-tick": 4096,
    "max-peer-down-duration": "5m",
    "max-leader-missing-duration": "2h",
    "abnormal-leader-missing-duration": "10m",
    "peer-stale-state-check-interval": "5m",
    "snap-apply-batch-size": "10MiB",
    "consistency-check-interval": "0s",
    "raft-store-max-leader-lease": "9s",
    "allow-remove-leader": false,
    "merge-check-tick-interval": "2s",
    "cleanup-import-sst-interval": "10m",
    "local-read-batch-size": 1024,
    "apply-max-batch-size": 256,
    "apply-pool-size": 2,
    "apply-reschedule-duration": "5s",
    "store-max-batch-size": 1024,
    "store-pool-size": 2,
    "store-reschedule-duration": "5s",
    "future-poll-size": 1,
    "perf-level": 1
  },
  "coprocessor": {
    "split-region-on-table": false,
    "batch-split-limit": 10,
    "region-max-size": "144MiB",
    "region-split-size": "96MiB",
    "region-max-keys": 1440000,
    "region-split-keys": 960000,
    "consistency-check-method": "mvcc",
    "perf-level": 2
  },
  "rocksdb": {
    "info-log-level": "info",
    "wal-recovery-mode": 2,
    "wal-dir": "",
    "wal-ttl-seconds": 0,
    "wal-size-limit": "0KiB",
    "max-total-wal-size": "4GiB",
    "max-background-jobs": 2,
    "max-background-flushes": 1,
    "max-manifest-file-size": "128MiB",
    "create-if-missing": true,
    "max-open-files": 40960,
    "enable-statistics": true,
    "stats-dump-period": "10m",
    "compaction-readahead-size": "0KiB",
    "info-log-max-size": "1GiB",
    "info-log-roll-time": "0s",
    "info-log-keep-log-file-num": 10,
    "info-log-dir": "",
    "rate-bytes-per-sec": "10GiB",
    "rate-limiter-refill-period": "100ms",
    "rate-limiter-mode": 2,
    "rate-limiter-auto-tuned": true,
    "bytes-per-sync": "1MiB",
    "wal-bytes-per-sync": "512KiB",
    "max-sub-compactions": 1,
    "writable-file-max-buffer-size": "1MiB",
    "use-direct-io-for-flush-and-compaction": false,
    "enable-pipelined-write": true,
    "enable-multi-batch-write": true,
    "enable-unordered-write": false,
    "defaultcf": {
      "block-size": "64KiB",
      "block-cache-size": "967MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": true,
      "optimize-filters-for-hits": true,
      "whole-key-filtering": true,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "lz4",
        "lz4",
        "lz4",
        "zstd",
        "zstd"
      ],
      "write-buffer-size": "128MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "512MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 4,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 3,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": true,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "zstd",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "normal",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "writecf": {
      "block-size": "64KiB",
      "block-cache-size": "580MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": true,
      "optimize-filters-for-hits": false,
      "whole-key-filtering": false,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "lz4",
        "lz4",
        "lz4",
        "zstd",
        "zstd"
      ],
      "write-buffer-size": "128MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "512MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 4,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 3,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": true,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "zstd",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "read-only",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "lockcf": {
      "block-size": "16KiB",
      "block-cache-size": "256MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": true,
      "optimize-filters-for-hits": false,
      "whole-key-filtering": true,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "no",
        "no",
        "no",
        "no",
        "no"
      ],
      "write-buffer-size": "32MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "128MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 1,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 0,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": false,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "disable",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "read-only",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "raftcf": {
      "block-size": "16KiB",
      "block-cache-size": "128MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": true,
      "optimize-filters-for-hits": true,
      "whole-key-filtering": true,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "no",
        "no",
        "no",
        "no",
        "no"
      ],
      "write-buffer-size": "128MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "128MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 1,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 0,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": false,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "disable",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "read-only",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "ver-defaultcf": {
      "block-size": "64KiB",
      "block-cache-size": "967MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": true,
      "optimize-filters-for-hits": true,
      "whole-key-filtering": true,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "lz4",
        "lz4",
        "lz4",
        "zstd",
        "zstd"
      ],
      "write-buffer-size": "128MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "512MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 4,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 3,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": false,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "zstd",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "normal",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "titan": {
      "enabled": false,
      "dirname": "",
      "disable-gc": false,
      "max-background-gc": 2,
      "purge-obsolete-files-period": "10s"
    }
  },
  "raftdb": {
    "wal-recovery-mode": 2,
    "wal-dir": "",
    "wal-ttl-seconds": 0,
    "wal-size-limit": "0KiB",
    "max-total-wal-size": "4GiB",
    "max-background-jobs": 2,
    "max-background-flushes": 1,
    "max-manifest-file-size": "20MiB",
    "create-if-missing": true,
    "max-open-files": 40960,
    "enable-statistics": true,
    "stats-dump-period": "10m",
    "compaction-readahead-size": "0KiB",
    "info-log-max-size": "1GiB",
    "info-log-roll-time": "0s",
    "info-log-keep-log-file-num": 10,
    "info-log-dir": "",
    "info-log-level": "info",
    "max-sub-compactions": 1,
    "writable-file-max-buffer-size": "1MiB",
    "use-direct-io-for-flush-and-compaction": false,
    "enable-pipelined-write": true,
    "enable-unordered-write": false,
    "allow-concurrent-memtable-write": true,
    "bytes-per-sync": "1MiB",
    "wal-bytes-per-sync": "512KiB",
    "defaultcf": {
      "block-size": "64KiB",
      "block-cache-size": "256MiB",
      "disable-block-cache": false,
      "cache-index-and-filter-blocks": true,
      "pin-l0-filter-and-index-blocks": true,
      "use-bloom-filter": false,
      "optimize-filters-for-hits": true,
      "whole-key-filtering": true,
      "bloom-filter-bits-per-key": 10,
      "block-based-bloom-filter": false,
      "read-amp-bytes-per-bit": 0,
      "compression-per-level": [
        "no",
        "no",
        "lz4",
        "lz4",
        "lz4",
        "zstd",
        "zstd"
      ],
      "write-buffer-size": "128MiB",
      "max-write-buffer-number": 5,
      "min-write-buffer-number-to-merge": 1,
      "max-bytes-for-level-base": "512MiB",
      "target-file-size-base": "8MiB",
      "level0-file-num-compaction-trigger": 4,
      "level0-slowdown-writes-trigger": 20,
      "level0-stop-writes-trigger": 36,
      "max-compaction-bytes": "2GiB",
      "compaction-pri": 0,
      "dynamic-level-bytes": true,
      "num-levels": 7,
      "max-bytes-for-level-multiplier": 10,
      "compaction-style": 0,
      "disable-auto-compactions": false,
      "soft-pending-compaction-bytes-limit": "64GiB",
      "hard-pending-compaction-bytes-limit": "256GiB",
      "force-consistency-checks": false,
      "prop-size-index-distance": 4194304,
      "prop-keys-index-distance": 40960,
      "enable-doubly-skiplist": true,
      "enable-compaction-guard": false,
      "compaction-guard-min-output-file-size": "8MiB",
      "compaction-guard-max-output-file-size": "128MiB",
      "bottommost-level-compression": "disable",
      "bottommost-zstd-compression-dict-size": 0,
      "bottommost-zstd-compression-sample-size": 0,
      "titan": {
        "min-blob-size": "1KiB",
        "blob-file-compression": "lz4",
        "blob-cache-size": "0KiB",
        "min-gc-batch-size": "16MiB",
        "max-gc-batch-size": "64MiB",
        "discardable-ratio": 0.5,
        "sample-ratio": 0.1,
        "merge-small-file-threshold": "8MiB",
        "blob-run-mode": "normal",
        "level-merge": false,
        "range-merge": true,
        "max-sorted-runs": 20,
        "gc-merge-rewrite": false
      }
    },
    "titan": {
      "enabled": false,
      "dirname": "",
      "disable-gc": false,
      "max-background-gc": 2,
      "purge-obsolete-files-period": "10s"
    }
  },
  "raft-engine": {
    "enable": false,
    "dir": "/tidb-data/tikv/raft-engine",
    "recovery-mode": "tolerate-corrupted-tail-records",
    "bytes-per-sync": "256KiB",
    "target-file-size": "128MiB",
    "purge-threshold": "10GiB",
    "cache-limit": "1GiB"
  },
  "security": {
    "ca-path": "",
    "cert-path": "",
    "key-path": "",
    "cert-allowed-cn": [],
    "redact-info-log": null,
    "encryption": {
      "data-encryption-method": "plaintext",
      "data-key-rotation-period": "7d",
      "enable-file-dictionary-log": true,
      "file-dictionary-rewrite-threshold": 1000000,
      "master-key": {
        "type": "plaintext"
      },
      "previous-master-key": {
        "type": "plaintext"
      }
    }
  },
  "import": {
    "num-threads": 8,
    "stream-channel-window": 128,
    "import-mode-timeout": "10m"
  },
  "backup": {
    "num-threads": 1,
    "batch-size": 8,
    "sst-max-size": "144MiB"
  },
  "pessimistic-txn": {
    "wait-for-lock-timeout": "1s",
    "wake-up-delay-duration": "20ms",
    "pipelined": true
  },
  "gc": {
    "ratio-threshold": 1.1,
    "batch-keys": 512,
    "max-write-bytes-per-sec": "0KiB",
    "enable-compaction-filter": true,
    "compaction-filter-skip-version-check": false
  },
  "split": {
    "qps-threshold": 3000,
    "split-balance-score": 0.25,
    "split-contained-score": 0.5,
    "detect-times": 10,
    "sample-num": 20,
    "sample-threshold": 100,
    "byte-threshold": 31457280
  },
  "cdc": {
    "min-ts-interval": "1s",
    "old-value-cache-size": 1024,
    "hibernate-regions-compatible": true,
    "incremental-scan-speed-limit": "128MiB"
  }
}